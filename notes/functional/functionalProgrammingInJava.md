---
layout: post
notes: true
subtitle: "Functional Programming in Java"
comments: false
author: "[法] Pierre-Yves Saumont 著 （高清华 译）"
date: 2018-01-28 00:00:00

---


![](/img/notes/functional/functionalProgrammingInJava/functional_programming_in_java.jpg)

*   目录
{:toc }

# 1. 什么是函数式编程

本章要点：

*	函数式编程的优势
*	副作用的问题
*	引用透明如何让线程更安全
*	使用代换模型编程的原因
*	充分利用抽象

一般来说，函数式编程是用函数来编程的一种编程范式。

John Hughes写到：

*函数式编程中没有赋值语句，因此变量一旦有了值，就不会再改变了。更通俗地说，函数式编程完全没有副作用。除了计算结果，调用函数没有别的作用。这样便消除了bug的一个主要来源，也使得执行顺序变得无关紧要——因为没有能够改变表达式值的副作用，可以在任何时候对它求值。这样便把程序员从处理控制流程的负担中解脱出来。由于能够在任何时候对表达式求值，所以可以用变量的值来自由替换表达式，反之亦然——即程序式“引用透明”的。这样的自由度让函数式的程序比它们的一般对手在数学上更易驾驭。

## 1.1 函数式编程是什么

函数式编程有时被认为是一系列可以补充或替代其他编程范式的技术，例如：

*	函数是一等公民
*	匿名函数
*	闭包
*	柯里化
*	惰性求值
*	参数多态
*	代数数据类型

命令式编程和函数式编程的一个最大的不同是，函数式编程没有副作用。这意味着其中：

*	没有变量改变
*	没有打印到控制台或其他设备
*	没有写入文件、数据库、网络或其他什么
*	没有抛出异常

函数就是如下黑盒：

*	接收一个参数（一个单独的参数）
*	内部做一些神秘的事情，例如改变变量的值，还有许多命令式风格的东西，但是在外界来看并没有什么作用
*	返回一个（单独的）值

函数式编程其实是编写**非故意的副作用**的程序，副作用是程序预期结果的一部分。非故意的副作用也应该越少越好。

## 1.2 编写没有副作用的程序

*	异常的副作用
*	日志的副作用

## 1.3 引用透明如何让程序更安全

不被外界所影响的代码就是引用透明的，引用透明的代码的性质：

*	它是独立的，并不依赖于任何外部的设备来工作
*	它是确定的，意味着相同的参数总是返回相同的结果
*	它绝对不会抛出任何种类的Exception。它可能抛出错误，例如OOME（out-of-memory error，即内存耗尽）或是SOE（stack-overflow error，即堆栈溢出），但是这些错误表示代码有bug，并不是做作为程序员的你或是你API的用户应该处理的。
*	任何时候它都不会导致其他代码意外失败。
*	它不会由于外部设备（数据库、文件系统或网络）不可用、太慢或坏掉而崩溃。

## 1.4 函数式编程的优势

*	函数式程序更加易于推断，因为它们是确定性（deterministic）的。对于一个特定的输入总会给出相同的输出。
*	函数式程序更加易于测试。
*	函数式程序更加模块化，因为它们是由只有输入和输出的函数构建的。
*	函数式编程让复合和重新复合更加简单。

函数式程序天生就是线程安全的。

## 1.5 用代换模型来推断程序

请记住一个函数什么事情都不做。它只是有一个值，依赖于参数而已。因此，永远都可以用其值来替换一个函数调用或任何引用透明的表达式。 